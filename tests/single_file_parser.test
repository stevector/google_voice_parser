<?php

/**
 * @file
 * Tests of parser.
 */

require '../vendor/autoload.php';

// @todo, organize code into classes.
require '../index.php';



use Symfony\Component\DomCrawler\Crawler;


/**
 * Unit tests for csv functions.
 *
 * @todo, these functions might belong in there own class totally independent
 * of Drupal. These tests could then be done through PHPUnit.
 */
class GoogleVoiceFileParserUnitTests extends PHPUnit_Framework_TestCase  {

  /**
   * Get a the file path of a test csv file.
   */
  protected function getTestHtmlFilePath($name) {
    // @todo, eventually there may need to be a more robust way of going from
    // a name variable to a full path.
    return  'test_html/Test Sender - Text - 2013-09-27T11_26_44Z.html';
  }

  public function dataProviderTestOfSingleFile() {
    return array(
//        array(
//         'a',
//         'b',
//        )

      array(
        $this->getTestHtmlFilePath('todo'),
        $this->getExpectedSingleResultsArray(),
      )
    );
  }

  /**
   * Unit test of field_creator_csvToArray().
   *
   * @dataProvider dataProviderTestOfSingleFile
   */
  public function testOfSingleFile($expected_html_path, $expected_array) {

    $contents = file_get_contents($expected_html_path);

    $crawler = new Crawler($contents);


    $message = $crawler->filter('div.message')->each(function ($node, $i) {
       return singleMessageParser($node);
    });



    print_r($message);

    $this->assertTRUE('a' == 'a', 'test message');
  }

}
